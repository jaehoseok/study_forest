# Study Forest - ì¡¸ì—…ì‘í’ˆ Web <img width="40" alt="Logo" src="https://user-images.githubusercontent.com/62582301/140682079-3d8b3fe9-27c6-46d3-814a-4c9cb012a8ff.png">




**ìœ„ì¹˜ APIë¥¼ ì´ìš©í•œ ìŠ¤í„°ë”” ë§¤ì¹­ ì„œë¹„ìŠ¤**

<img width="1440" alt="LandingPage" src="https://user-images.githubusercontent.com/62582301/140681672-d004b9de-3988-47b2-86fd-c2936e7f3731.png">



<br>
<br>

## ê°œë°œí™˜ê²½ ğŸ“

- ### Web - ì„ì¬í˜¸
    - React
    - <a> https://github.com/jaehoseok/study_forest

- ### App - í•œë‹¤ë¹ˆ
    - Kotlin
    - <a> https://github.com/daisy6365/GraduatedProject

- ### Server - í™©ì£¼í™˜
    - Spring
    - <a> https://github.com/juhwan0815/study-server


<br>
<br>

## Development Stack ğŸ’¡

<img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=black">
<img src="https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=black">
<img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=black">
<img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=Javascript&logoColor=black">
<img src="https://img.shields.io/badge/kakao-FFCD00?style=for-the-badge&logo=kakao&logoColor=black">
<img src="https://img.shields.io/badge/firebase-FFCA28?style=for-the-badge&logo=firebase&logoColor=black">
<img src="https://img.shields.io/badge/redux-764ABC?style=for-the-badge&logo=redux&logoColor=black">
<img src="https://img.shields.io/badge/sockjs-010101?style=for-the-badge&logo=sockjs&logoColor=white">
<img src="https://img.shields.io/badge/stomp-010101?style=for-the-badge&logo=stomp&logoColor=white">
<img src="https://img.shields.io/badge/webpack-8DD6F9?style=for-the-badge&logo=webpack&logoColor=black">
<img src="https://img.shields.io/badge/babel-F9DC3E?style=for-the-badge&logo=babel&logoColor=black">
<img src="https://img.shields.io/badge/git-F05032?style=for-the-badge&logo=git&logoColor=black">
<img src="https://img.shields.io/badge/heroku-430098?style=for-the-badge&logo=heroku&logoColor=black">

<br>
<br>

## ì£¼ìš” ê¸°ëŠ¥ âš™ï¸

- ì´ˆê¸° í™”ë©´
![screencapture-localhost-3000-2021-11-08-13_53_21](https://user-images.githubusercontent.com/62582301/140686229-b0a7ed31-8d4d-47cb-8ec0-200bc2ed6dce.png)


- ìŠ¤í„°ë”” ì •ë³´ ìƒì„¸ ë³´ê¸°
![screencapture-localhost-3000-StudyDetail-205-2021-11-08-13_51_36](https://user-images.githubusercontent.com/62582301/140686088-364170a4-aa58-4823-b11d-45d3173ab750.png)


- ë¡œê·¸ì¸
<img width="1438" alt="Login" src="https://user-images.githubusercontent.com/62582301/140685530-414d76a8-c0fc-41d6-8913-094fdce67053.png">


- ë§ˆì´ í˜ì´ì§€
![screencapture-localhost-3000-MyPage-2021-11-08-13_55_02](https://user-images.githubusercontent.com/62582301/140686354-dc962045-986d-4671-a8dd-d4da8b3c0d62.png)



- ë‚˜ì˜ ìŠ¤í„°ë”” (ê°€ì…í•œ ìŠ¤í„°ë””)
<img width="1440" alt="MyStudy" src="https://user-images.githubusercontent.com/62582301/140685785-80a1a014-e356-4a69-8af6-0975fb289802.png">


- ê°€ì…í•œ ìŠ¤í„°ë”” ìƒì„¸ë³´ê¸°
<img width="1440" alt="MyStudyDetail" src="https://user-images.githubusercontent.com/62582301/140686632-ca9fd358-9b13-4b68-a371-755bf9d6b732.png">

- ìŠ¤í„°ë”” ë©¤ë²„ ê´€ë¦¬
![screencapture-localhost-3000-StudyRoom-207-ManagementMember-2021-11-08-13_59_59](https://user-images.githubusercontent.com/62582301/140686721-e2de7624-cf03-4203-ae48-fed75f2954c7.png)


- ëª¨ì„ ìƒì„±
![screencapture-localhost-3000-StudyRoom-207-MakeGathering-2021-11-08-14_00_55](https://user-images.githubusercontent.com/62582301/140686794-39ab5c2f-0409-450e-8149-329c20af41dd.png)


- ëª¨ì„ ë³´ê¸°
![screencapture-localhost-3000-StudyRoom-207-GatheringList-2021-11-08-14_01_44](https://user-images.githubusercontent.com/62582301/140686870-123f06b2-1db6-4ff5-b8bf-524d90273cbb.png)


- ëª¨ì„ ìƒì„¸ ë³´ê¸°
![screencapture-localhost-3000-StudyRoom-207-GatheringDetail-7-2021-11-08-14_02_33](https://user-images.githubusercontent.com/62582301/140686940-b0b3a4ed-4651-42eb-ae53-a1a59da4bb6d.png)

- ì±„íŒ…ë°© ë§Œë“¤ê¸°
![screencapture-localhost-3000-StudyRoom-3-MakeChat-2021-11-17-14_52_49](https://user-images.githubusercontent.com/62582301/142142690-f1e5cbf4-8236-41eb-8d05-b76e957818b4.png)

- ì±„íŒ…ë°©
![screencapture-localhost-3000-StudyRoom-3-GatheringChat-3-2021-11-17-14_47_27](https://user-images.githubusercontent.com/62582301/142142173-7c09491c-8b25-4a91-979b-85abbe57aeab.png)


## ì£¼ìš” ê¸°ëŠ¥ ì„¤ëª… ğŸ“„
- **kakao auth**

```javascript
    const Login =  () => {
        kakao.Auth.login({
            success: function (authObj) {
                const AccessToken = JSON.stringify(authObj["access_token"]);
                
                let body = {
                    kakaoToken: kakao.Auth.getAccessToken()
                }
                dispatch(loginUser(body))
                .then(response => {
                    if(response.payload.isLogin){
                        window.location.href='/'
                    } else {
                        alert('ë¡œê·¸ì¸ ì‹¤íŒ¨')
                    }
                })
            },

            fail: function(err) {

            }
        }); 
    }
```
 ì¹´ì¹´ì˜¤ auth api ì—ì„œ kakaoTokenì„ ë°›ì•„ì˜¨ ë’¤ í† í°ì„ í—¤ë”ì— ë‹´ì•„ ì„œë²„ì— ë¡œê·¸ì¸ ìš”ì²­ì„ ë³´ë‚´ë©´ ì„œë²„ í† í°ì„ ë°›ê³  Session Storage ì— ì €ì¥í•˜ì—¬ ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•œë‹¤.

- **kakao ìœ„ì¹˜ api**

```javascript
    useEffect(() => {
        const mapContainer = document.getElementById('selectedMap')
        const mapOptions = {
            center: new kakao.maps.LatLng(selectedLet.current, selectedLen.current),
            level: 5,
            draggable: false,
        }
        const map = new kakao.maps.Map(mapContainer, mapOptions)
    }, [selectedLet.current, selectedLen.current])
```
 ì§€ì—­ì´ ì„ íƒë˜ë©´ í•´ë‹¹ ì§€ì—­ì˜ ì¢Œí‘œê°’ì„ ê°€ì§€ê³  ë§µì„ ë³´ì—¬ì¤€ë‹¤.

 - **FCM ì•Œë¦¼**
 
 ```javascript
    useEffect(async() => {

    const config =  { 
      apiKey: "apiKey",
      authDomain: "study-forest.firebaseapp.com",
      projectId: "study-forest",
      storageBucket: "study-forest.appspot.com",
      messagingSenderId: "messagingSenderId",
      appId: "appId",
      measurementId: "measurementId"
    }; 
    firebase.initializeApp(config);
    const messaging = firebase.messaging();
  
  await messaging.requestPermission()
  .then(async () => {
    console.log('fcm í—ˆê°€!');
    const FCMToken = await messaging.getToken({ vapidKey: 'vapiKey' });
    window.sessionStorage.setItem('FCMToken', FCMToken)
    //í† í°ì„ ë°›ëŠ” í•¨ìˆ˜ë¥¼ ì¶”ê°€!
  })
  .catch(function(err) {
    console.log('fcmì—ëŸ¬ : ', err);
  })
 ```
  App.js ê°€ ë Œë”ë§ ë˜ë©´ì„œ FCM í† í°ì„ ë°›ê³  ë¡œê·¸ì¸ì„ í•˜ë©° FCM í† í°ì„ ë³´ë‚´, ì•Œë¦¼ì´ ìš¸ë¦¬ë„ë¡ ì„¤ì •í•¨.

  ```javascript
  importScripts('https://www.gstatic.com/firebasejs/4.8.1/firebase-app.js');
importScripts('https://www.gstatic.com/firebasejs/4.8.1/firebase-messaging.js');
const config =  { 
    apiKey: "apiKey",
    authDomain: "study-forest.firebaseapp.com",
    projectId: "study-forest",
    storageBucket: "study-forest.appspot.com",
    messagingSenderId: "messagingSenderId",
    appId: "appId",
    measurementId: "measurementId"
}; 
firebase.initializeApp(config);

const messaging = firebase.messaging();

messaging.setBackgroundMessageHandler((payload) => {
	const title  =  payload.data.title;
	const options  = {
		body: payload.data.message,
	};
    console.log(payload);
	return self.registration.showNotification(title, options);
})
  ```
 backgroundì—ì„œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ public í´ë” ì•ˆì— ì„œë¹„ìŠ¤ ì›Œì»¤ë¥¼ ë“±ë¡

- **ì±„íŒ…***

```javascript
    const connect = async () => {
        client.current = new StompJs.Client({
            webSocketFactory: () => new SockJS("http://211.37.147.101:8000/chat-service/ws-stomp"), // proxyë¥¼ í†µí•œ ì ‘ì†
            connectHeaders: {
                'token': window.sessionStorage.getItem('accessToken'),
            },
            debug: function (str) {

            },
            reconnectDelay: 5000,
            heartbeatIncoming: 4000,
            heartbeatOutgoing: 4000,
            onConnect: (frame) => {

                subscribe();
            },
            onStompError: (frame) => {
                console.error(frame);
            },
        });
        client.current.activate();
        await pullMessage()
    };

    const disconnect = async () => {
        client.current.deactivate();
        await setprevMessage([])
    };
    
    const subscribe = () => {
        client.current.subscribe(`/sub/chat/room/${chatId}`, ({ body }) => {
            setChatMessages((_chatMessages) => [..._chatMessages, JSON.parse(body)]);
        },{"token":window.sessionStorage.getItem('accessToken')});
    };

    const publish = async () => {
        if (!client.current.connected) {
            return;
        }
    
        client.current.publish({
            destination: "/pub/chat/message",
            headers:{
                token: window.sessionStorage.getItem('accessToken'),
            },    
            body: JSON.stringify({ roomId: chatId, sender: window.sessionStorage.getItem('nickName'), message: Message }),
        });
        setMessage("");
    };
```
 ì„œë²„ì™€ Stompë¡œ ë©”ì„¸ì§€ë¥¼ ì£¼ê³  ë°›ê³  í•˜ë©°, publishë¡œ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ê³   subscribeë¡œ ë“¤ì–´ê°„ ì±„íŒ…ì˜ ì•Œë¦¼ì„ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•˜ì˜€ë‹¤.


- **ë°°í¬**
 ë°°í¬ëŠ” í—¤ë¡œì¿ ë¥¼ í†µí•´ í•˜ì˜€ë‹¤.
## ë³´ì™„ ì‚¬í•­ âš ï¸

- ê¹ƒí—ˆë¸Œë¥¼ ê°œì¸ë§ˆë‹¤ ë§Œë“¤ì–´ branchë¥¼ í™œìš©í•´ë³´ì§€ ëª»í•¨
- classNameì„ camelCaseì™€ snake-caseë¥¼ ë‘˜ë‹¤ ì‚¬ìš©í•˜ì—¬ ê°€ë…ì„±ì— ë¬¸ì œê°€ ìˆê³  ê°™ì€ classNameì„ ì‚¬ìš©í•˜ì—¬ ì˜ˆìƒì¹˜ ëª»í•œ ë””ìì¸ì´ ë‚˜ì˜´
- íŒŒì¼ë“¤ì˜ ì •ë¦¬ê°€ ì˜ ì•ˆë˜ì–´ ìˆì–´, í˜‘ì—…ì´ì˜€ë‹¤ë©´ ë¬¸ì œê°€ ë  ì†Œì§€ê°€ ìˆìŒ
- Reduxì˜ í™œìš©ì´ ë§¤ìš° ì ì–´ Stateì˜ ê´€ë¦¬ê°€ ì œëŒ€ë¡œ ì´ë£¨ì–´ ì§€ì§€ ì•ŠìŒ
- API.js ë˜í•œ ê° ì¹´í…Œê³ ë¦¬ ë³„ë¡œ ë‚˜ëˆ„ì–´ ë§Œë“¤ë©´ ì¢‹ì•˜ì„ê±° ê°™ìŒ
- ì„œë²„ì— httpsë¡œ ìš”ì²­í•˜ë©´ sslì—ëŸ¬ê°€ í„°ì§, ë°°í¬ì‹œì— ë¬¸ì œê°€ ë¨
- cssì— media ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•¨